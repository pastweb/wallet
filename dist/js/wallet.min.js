/*! wallet 07-01-2015 */
"use strict";var app=angular.module("myApp",["ui.router","ngStorage"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("index",{url:"/",views:{app_modal:{templateUrl:"partials/modal.html"},app_header:{templateUrl:"partials/header.html"},app_container:{templateUrl:"partials/home.html"}}}).state("info",{url:"/info",views:{app_modal:{templateUrl:"partials/modal.html"},app_header:{templateUrl:"partials/header.html"},app_container:{templateUrl:"partials/info.html"}}})}]),app.controller("headerCtrl",["$scope","$rootScope",function(a,b){a.resetStorage=function(){b.$emit("resetEvent")}}]),app.controller("homeCtrl",["$scope","$localStorage","$rootScope",function(a,b,c){a.$storage=b.$default({balance:0,operations:[]}),a.getDateTime=function(){var a=new Date;return a=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()},a.amount=0,a.lastUpdate=a.getDateTime(),a.inputClass="form-control",a.showModal=function(a){var b={message:a};c.$emit("openModal",b)},a.addValue=function(){isNaN(a.amount)?a.showModal("the text is not a number"):a.amount>0&&(a.$storage.balance+=a.amount,a.$storage.operations.push({symbol:"+",amount:a.amount,date:a.getDateTime()}),a.lastUpdate=a.getDateTime(),a.cleanField())},a.rmValue=function(){if(!isNaN(a.amount)&&a.amount<=a.$storage.balance&&a.amount>0)a.$storage.balance-=a.amount,a.$storage.operations.push({symbol:"-",amount:a.amount,date:a.getDateTime()}),a.lastUpdate=a.getDateTime(),a.cleanField();else{var b="";b=a.amount>a.$storage.balance?"the Amont value is greater that Balance.":"the text is not a number",a.showModal(b)}},a.cleanField=function(){a.amount=""},a.setBGItem=function(a){var b={};return"-"==a?(b["class"]="negative",b.icon="fa fa-minus"):(b["class"]="positive",b.icon="fa fa-plus"),b},c.$on("resetEvent",function(){a.$storage.balance=0,a.$storage.operations=[]})}]),app.controller("modalCtrl",["$scope","$rootScope","$timeout",function(a,b,c){a.modalMessage="",a.modalClass="app_modal hide_element",b.$on("openModal",function(b,c){a.modalMessage=c.message,a.modalClass="app_modal show_element fade_in"}),a.close=function(){a.modalClass="app_modal fade_out",c(function(){a.modalClass="app_modal hide_element"},700)}}]),app.directive("smartFloat",["$filter",function(a){var b=/^\$?\d+(.\d{3})*(\,\d*)?$/,c=/^\$?\d+(,\d{3})*(\.\d*)?$/;return{require:"ngModel",link:function(d,e,f,g){g.$parsers.unshift(function(a){return b.test(a)?(g.$setValidity("float",!0),parseFloat(a.replace(".","").replace(",","."))):c.test(a)?(g.$setValidity("float",!0),parseFloat(a.replace(",",""))):void g.$setValidity("float",!1)}),g.$formatters.unshift(function(b){return a("number")(parseFloat(b),2)})}}}]);